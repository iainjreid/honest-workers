{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bbb1f5d7db3de192a1c7","webpack:///./src/index.js","webpack:///./src/utils.js"],"names":["_workers","WeakMap","HonestWorkers","set","uid","fn","workers","get","Error","args","worker","Worker","Promise","resolve","reject","onmessage","msg","postMessage","createWorkerScript","blob","Blob","toString","type","URL","createObjectURL"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;ACtCA;;AAEA;;;;;;;;AACA;;;;AAEA,KAAMA,WAAW,IAAIC,OAAJ,EAAjB;;AAEA;;;;;KAIMC,a;AACJ,4BAAe;AAAA;;AACbF,cAASG,GAAT,CAAa,IAAb,EAAmB,EAAnB;AACD;;AAED;;;;;;;;;;8BAMUC,G,EAAKC,E,EAAI;AACjB,WAAMC,UAAUN,SAASO,GAAT,CAAa,IAAb,CAAhB;;AAEA;AACA,WAAID,QAAQF,GAAR,CAAJ,EAAkB;AAChB,eAAMI,MAAM,wBAAN,CAAN;AACD;;AAEDF,eAAQF,GAAR,IAAe,+BAAmBC,EAAnB,CAAf;AACAL,gBAASG,GAAT,CAAa,IAAb,EAAmBG,OAAnB;;AAEA,cAAOA,QAAQF,GAAR,CAAP;AACD;;AAED;;;;;;;;;6BAMSA,G,EAAc;AAAA,yCAANK,IAAM;AAANA,aAAM;AAAA;;AACrB,WAAIC,eAAJ;;AAEA;AACA,WAAI,EAAEA,SAASV,SAASO,GAAT,CAAa,IAAb,EAAmBH,GAAnB,CAAX,CAAJ,EAAyC;AACvC,eAAMI,MAAM,8BAAN,CAAN;AACD;;AAEDE,gBAAS,IAAIC,MAAJ,CAAWD,MAAX,CAAT;;AAEA,cAAOE,QAAQ,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAClCJ,gBAAOK,SAAP,GAAmB,UAACC,GAAD,EAAS;AAC1BH,mBAAQG,GAAR;AACD,UAFD;;AAIAN,gBAAOO,WAAP,WAAuBR,IAAvB,GAA6BI,OAA7B;AACD,QANM,CAAP;AAOD;;AAED;;;;;;yBAGa;AACX,cAAOX,aAAP;AACD;;;;;;mBAGY,IAAIA,aAAJ,E;;;;;;;;;ACrEf;;;;;AAEA,UAASgB,kBAAT,CAA6Bb,EAA7B,EAAiC;AAC/B;AACA,OAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B;AAC5B,WAAMG,MAAM,kCAAN,CAAN;AACD;;AAED,OAAIW,OAAO,IAAIC,IAAJ,CAAS,mDAEPf,GAAGgB,QAAH,EAFO,aAAT,EAIR,EAAEC,MAAM,iBAAR,EAJQ,CAAX;;AAMA,UAAOC,IAAIC,eAAJ,CAAoBL,IAApB,CAAP;AACD;;SAEQD,kB,GAAAA,kB","file":"honest-workers.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"honestWorkers\"] = factory();\n\telse\n\t\troot[\"honestWorkers\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bbb1f5d7db3de192a1c7\n **/","'use strict'\r\n\r\n// Dependencies\r\nimport { createWorkerScript } from './utils'\r\n\r\nconst _workers = new WeakMap()\r\n\r\n/**\r\n * @description A module allowing developers to benefit from the wonderful Promise interface whilst enjoying the\r\n *              multi-threaded goodness provided by WebWorkers.\r\n */\r\nclass HonestWorkers {\r\n  constructor () {\r\n    _workers.set(this, {})\r\n  }\r\n\r\n  /**\r\n   * @param {String}   uid - A unique name or identifier\r\n   * @param {Function} fn  - A function with no lexical dependance\r\n   *\r\n   * @return {Function} - A reference to the new congifuration object\r\n   */\r\n  register (uid, fn) {\r\n    const workers = _workers.get(this)\r\n\r\n    // Ensure that the UID provided has not previously been used\r\n    if (workers[uid]) {\r\n      throw Error('The UID must be unique')\r\n    }\r\n\r\n    workers[uid] = createWorkerScript(fn)\r\n    _workers.set(this, workers)\r\n\r\n    return workers[uid]\r\n  }\r\n\r\n  /**\r\n   * @param {String} uid  - A unique name or identifier\r\n   * @param {...Any} args - A list of arguements to be passed\r\n   *\r\n   * @return {Promise} - A Promise dependant on the success of the task\r\n   */\r\n  execute (uid, ...args) {\r\n    let worker\r\n\r\n    // Ensure that the UID has been registered\r\n    if (!(worker = _workers.get(this)[uid])) {\r\n      throw Error('The UID has not been defined')\r\n    }\r\n\r\n    worker = new Worker(worker)\r\n\r\n    return Promise((resolve, reject) => {\r\n      worker.onmessage = (msg) => {\r\n        resolve(msg)\r\n      }\r\n\r\n      worker.postMessage([...args, resolve])\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @return {Function} - A reference to the HonestWorkers class\r\n   */\r\n  get Class () {\r\n    return HonestWorkers\r\n  }\r\n}\r\n\r\nexport default new HonestWorkers()\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","'use strict'\r\n\r\nfunction createWorkerScript (fn) {\r\n  // Ensure that \"fn\" is a function\r\n  if (typeof fn !== 'function') {\r\n    throw Error('Worker script must be a function')\r\n  }\r\n\r\n  let blob = new Blob([\r\n    `self.onmessage = function () {\r\n      return ${fn.toString()}\r\n    }`\r\n  ], { type: 'text/javascript' })\r\n\r\n  return URL.createObjectURL(blob)\r\n}\r\n\r\nexport { createWorkerScript }\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/"],"sourceRoot":""}